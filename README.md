# cluster_base: Esse é a construção do cluster que eu utilizo para realizar meus processamentos

## 1. RECURSOS NECESSÁRIOS

1. INSTALAR O VIRTUAL BOX

2. BAIXAR UMA VERSÃO RECENTE DO CENTOS8-STREAM (<https://www.centos.org/download/>)

## 2. CONFIGURANDO A VIRTUALBOX
1. ABRA O VIRTUAL BOX E CLIQUE EM NOVO
2. DÊ UM NOME A SUA MÁQUINA VIRTUAL (no meu caso foi CLUSTER-CENTOS) E ESCOLHA LINUX PARA TIPO E REDHAT 64-BITS EM VERSÃO
3. CONFIGURE 3,5GB DE MEMÓRIA RAN
4. CRIE UM NOVO DISCO RIGIDO VIRTUAL, E SELECIONE VDI(VIRTUALBOX DISK IMAGE)
5. COLOQUE DINAMICAMENTE ALOCADO
6. COLOQUE 80 GB DE ARMAZENAMENTO
7. CLIQUE EM CIMA DE SUA MÁQUINA VIRTUAL SELECIONANDO ELA, DEPOIS CLIQUE EM CONFIGURAÇÕES
8. EM CONFIGURAÇÕES SELECIONE SISTEMA-PROCESSADOR E COLOQUE 3 NUCLEOS
9. EM CONFIGURAÇÕES SELECIONE ARMAZENAMENTO, NA PARTE DE DISPOSITIVOS DE ARMAZENAMENTO CLIQUE EM CIMA DO DISCO DA PARTE CONTROLADORA: IDE
	9.1 NA PARTE DIREITA EM ATRIBUTOS - DRIVE OPTICO CLIQUE EM CIMA DO CD E SELECIONE ESCOLHER UMA IMAGEM DE DISCO, DEPOIS ESCOLHE A IMAGEM DO CENTOS
10. EM CONFIGURAÇÕES SELECIONE REDE, HABILITE PLACA DE REDE E COLOQUE CONECTADO A PLACA EM MODO BRIDGE 

## 3. INSTALAR O CENTOS9
1. INICIE A SUA MÁQUINA VIRTUAL
2. ESCOLHA A LINGUAGEM PORTUGUES > PORTUGUES DO BRASIL
3. EM SELEÇÃO DE PROGRAMAS ESCOLHA: MINIMAL INSTALL > STANDARD + CONSOLE INTERNET TOOLS + SCIENTIFIC SUPPORT
3. EM DESTINO INSTALAÇÃO ESCOLHA O DISCO CRIADO NO PASSO 2
4. EM CONFIGURAÇÕES DE USUARIO ESCOLHA A SENHA DO ROOT
5. INICIE A INSTALAÇÃO DO SISTEMA
6. POR PADRÃO, A INSTALAÇÃO NORMAL DO CENTOS9 JÁ POSSUI O PYTHON 3.9 INSTALADO E O SSH, ASSIM PODE-SE APENAS CONECTAR A MAQUINA VIRTUAL UTILIZANDO
SEU CLIENTE SSH 

## 4. INSTALAR VIRTUAL ENV + PANDAS + JUPYTER
1. CRIE UMA PASTA PARA O PROJETO

```
mkdir "nome_da_pasta" 
```

2. ENTRE NA PASTA
	
```
cd "nome_da_pasta"
```
3. INSTALE O GERENCIADOR DE PACOTES DO PYTHON
	
```
yum install python3-pip
```
4. INSTALE O AMBIENTE VIRTUAL NA PASTA

```
virtualenv -p python3 "nome"
```
5. PARA ATIVAR A VIRTUAL ENV

```
source "nome"/bin/activate
```
6. INSTALE O PANDAS NO AMBIENTE VIRTUAL

```
pip install pandas
```
7. ATUALIZE E ATIVE OS PACOTES DE COMPILADORES

```
dnf makecache
dnf install gcc python3-devel kernel-headers-$(uname -r)
```
8. INSTALE UMA VERSÃO DE UM PACOTE CHAMADO pyzmq

```
pip install pyzmq==23.2.1
```
9. INSTALE O JUPYTER

```
pip install jupyter
```
10. PREPARE O JUPYTER 

```
ipython kernel install --name coleta_dados --user
```
11. SAIA DA SUA CONEXÃO SSH ATUAL E INICIE UMA NOVA

```
ssh -L 8000:localhost:8888 root@192.168.1.109
```
12. VA ATÉ A PASTA DE SEU AMBIENTE VIRTUAL E ENTRE NO SEU AMBIENTE VIRTUAL
13. INICIE SEU JUPYTER NOTEBOOK DENTRO DO SEU AMBIENTE VIRTUAL

```
jupyter notebook --allow-root
```
14. AGORA NO NAVEGADOR DO SEU COMPUTADOR HOST, COLOQUE A URL DO JUPYTER SUBISTINDO AS PORTAS 8888 POR 8000

## 5. INSTALAR MYSQL
1. ATUALIZE OS FLUXOS DO CENTOS	

```
dnf upgrade --refresh -y
```
2. INSTALE A VERSÃO DE COMUNIDADE DO MYSQL

```
dnf install mysql mysql-server -y
```
3. ATIVE O MYSQL

```
systemctl enable mysqld --now
```
4. VERIFIQUE SE ELE ESTA RODANDO

```
systemctl status mysqld
```
5. SE PRECISAR PARAR O MYSQL POR ALGUM MOTIVO

```
systemctl stop mysqld
```
6. SE PRECISAR LIGAR DE NOVO

```
systemctl start mysqld
```
7. DESABILITE A ATIVAÇÃO DO MYSQL AO LIGAR O SISTEMA

```
systemctl disable mysqld
```
8. HABILITE A ATIVAÇÃO DO MYSQL AO LIGAR O SISTEMA

```
systemctl enable mysqld
```
9. RESTARTAR O MYSQL

```
systemctl restart mysqld
```

## 6. CONFIGURAR A CONEXÃO VIA PYTHON 
1. CONECTE A SUA MÁQUINA VIRTUAL 
```
ssh -L 8000:localhost:8888 root@192.168.1.109
```
2. ENTRE NO SEU CONTAINER PYTHON
```
source "caminho_ambiente_virtual/activate"
```
3. DENTRO DO AMBIENTE VIRTUAL, INSTALE O PACOTE MYSQL-CONNECTOR
```
pip install mysql-connector-python
```
